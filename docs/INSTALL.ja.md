# Bird Shortcuts 導入手順（ユーザー向け）

このドキュメントでは、リリースページからビルド成果物をダウンロードし、Thunderbird にインストールする方法を説明します。Thunderbird 115 以降を対象としています。

## 対応バージョン・前提条件

- Thunderbird 115 以上（ESR ライン想定）
- インターネット接続（GitHub Releases からダウンロード）

## ダウンロード

1. プロジェクトの GitHub Releases ページを開きます。
   - リポジトリの「Releases」から、最新の `vX.Y.Z` タグのリリースを選択してください。
2. アセット（添付ファイル）から次のいずれかを取得します。
   - `artifacts/*.zip`（推奨）
   - もしくは `dist/**/*` 一式（フォルダで配布されている場合）

補足: `.github/workflows/release.yml` により、タグ付きリリースには `artifacts/*.zip` と `dist/**/*` が添付されます。

## インストール（通常）

Thunderbird のアドオンマネージャからインストールします。

1. Thunderbird を起動します。
2. メニューから「アドオンとテーマ」を開きます（Ctrl+Shift+A）。
3. 右上の歯車メニューから「ファイルからアドオンをインストール…」を選択します。
4. ダウンロードしたファイルを選びます。
   - ZIP のまま指定してインストールできる場合があります。
   - インストールできない場合は、拡張子を `.xpi` にリネームしてから再試行してください（例: `bird-shortcuts-vX.Y.Z.zip` → `bird-shortcuts-vX.Y.Z.xpi`）。
5. 警告が表示された場合、内容を確認のうえ許可してください。
6. インストール完了後、Thunderbird を再起動するよう求められた場合は、再起動してください。

## インストール（フォルダ配布の場合）

`dist/` フォルダ一式を入手した場合：

- 上記「通常」手順で `.xpi` を指定する代わりに、「デバッグ用一時読み込み」を使うか、`dist/` を `.zip` 化して `.xpi` にリネームしてからインストールできます。

### 例：ZIP 化 → .xpi にリネーム

1. `dist/` の内容（フォルダ直下のファイルとサブフォルダ）をまとめて ZIP に圧縮します。
2. 生成した ZIP の拡張子を `.xpi` に変更します。
3. 「インストール（通常）」の手順 3～ を実行します。

## 開発者向け：一時的に読み込む（動作確認）

署名やパッケージ化を行わず、内容をそのまま読み込んで動作確認したい場合：

1. Thunderbird のメニューから「ツール」→「開発ツール」→「アドオンのデバッグ」を開きます。
2. 「一時的なアドオンを読み込む」または同等のボタンを押し、`dist/` フォルダ内の `manifest.json` を選択します。
3. アドオンが一時的に読み込まれます（Thunderbird を再起動すると無効になります）。

## 使い方（概要）

- メッセージ表示用ツールバーボタン
  - メール表示画面のツールバーにボタンが追加されます（`messageDisplayAction`）。
  - 既定のタイトルは「文字化け修復」です。
- キーボードショートカット（既定）
  - Windows/Linux: `Ctrl+Shift+E`
  - macOS: `Command+Shift+E`
- 機能 1（既定のアクション）
  - Thunderbird 標準の「文字化け修復」を呼び出します（内蔵コマンドのブリッジ）。

## 注意事項

- 本アドオンは Thunderbird の既存機能を呼び出します。文字化けの全パターンを修復できない場合があります。詳細は `docs/CAUTION.md` を参照してください。
- 企業環境などでアドオンのインストールが制限されている場合は、ポリシー設定や署名要件によりインストールできない可能性があります。必要に応じてシステム管理者にご相談ください。

## トラブルシューティング（よくある例）

- インストール時にエラーが出る
  - ZIP を `.xpi` にリネームして再試行してください。
  - Thunderbird のバージョンが 115 以上であることを確認してください。
- ボタンが表示されない / ショートカットが効かない
  - 対象のメッセージ画面（3 ペインまたはメッセージウィンドウ）をアクティブにしたうえで試してください。
  - アドオンが有効化されているかを「アドオンとテーマ」で確認してください。

---
より詳細な技術情報や開発手順は `README.md` を参照してください。
